(()=>{"use strict";class e{constructor(e,t){this.style=e,this.instrument=t,this.isMute=!1,this.isSolo=!1}generateTrack(){var e=document.querySelector("body"),t=document.querySelector(`.${this.instrument}__track`);const r=document.createElement("div");r.id=`${this.style}_${this.instrument}`,e.append(r),this.instrumentTrack=WaveSurfer.create({container:`#${this.style}_${this.instrument}`,waveColor:"#008016",backEnd:"MediaElement",barHeight:4,height:160,responsive:!0,regionsMinLength:10,loopSelection:.05}),this.instrumentTrack.load(`../public/assets/sound/${this.style}/${this.style}_${this.instrument}.mp3`),t.append(r)}removeTrack(){document.getElementById(`${this.style}_${this.instrument}`).remove()}}function t(e,t,r,s,n){"./public/assets/image/play_arrow.svg"==e.getAttribute("src")?e.setAttribute("src","./public/assets/image/pause.svg"):e.setAttribute("src","./public/assets/image/play_arrow.svg"),t.instrumentTrack.playPause(),r.instrumentTrack.playPause(),s.instrumentTrack.playPause(),n.instrumentTrack.playPause()}function r(e,t,r,s,n){e.setAttribute("src","./public/assets/image/play_arrow.svg"),t.instrumentTrack.stop(),r.instrumentTrack.stop(),n.instrumentTrack.stop(),s.instrumentTrack.stop()}function s(e,t,r,s,n){e.setAttribute("src","./public/assets/image/play_arrow.svg"),t.instrumentTrack.skipForward(),r.instrumentTrack.skipForward(),n.instrumentTrack.skipForward(),s.instrumentTrack.skipForward()}function n(e,t,r,s,n){e.setAttribute("src","./public/assets/image/play_arrow.svg"),t.instrumentTrack.skipBackward(),r.instrumentTrack.skipBackward(),n.instrumentTrack.skipBackward(),s.instrumentTrack.skipBackward()}function c(e,t){e.hasAttribute("style")?e.removeAttribute("style"):e.setAttribute("style","background-color: #119e74;"),t.instrumentTrack.toggleMute(),t.instrumentTrack.container.classList.toggle("muted-track")}function a(e,t,r){e.hasAttribute("style")?e.removeAttribute("style"):e.setAttribute("style","background-color: #e2941f;");var s=t.indexOf(r);t.forEach((e=>{t.indexOf(e)!==s&&(e.instrumentTrack.toggleMute(),e.instrumentTrack.container.classList.toggle("muted-track"))}))}function i(e,t){var r=e.value;t.instrumentTrack.setVolume(r)}const u=document.getElementById("manual"),o=document.getElementById("help_outline");function l(){u.toggleAttribute("hidden"),o.classList.toggle("clicked")}const d=document.getElementById("source"),m=document.getElementById("folder");function k(){d.toggleAttribute("hidden"),m.classList.toggle("clicked")}function g(t,r){const s=new e(t,r);return s.generateTrack(),s}let b=g("rock","drums"),y=g("rock","bass"),v=g("rock","guitar"),h=g("rock","keyboard");window.addEventListener("load",(()=>{var e,t,r,s,n;e=document.getElementById("modal"),t=document.getElementById("modal_bg"),r=document.getElementById("mybar"),s=1,n=setInterval((function(){s>=100&&(clearInterval(n),e.toggleAttribute("hidden"),t.toggleAttribute("hidden")),s++,r.style.width=s+"%"}),10)}));const p=document.getElementById("help_outline"),T="./public/assets/image/help_outline_black.svg";p.addEventListener("click",(()=>{p.getAttribute("src")===T?(l(),p.setAttribute("src","./public/assets/image/help_outline_white.svg")):(l(),p.setAttribute("src",T))}));const E=document.getElementById("folder"),w="./public/assets/image/source_black.svg";E.addEventListener("click",(()=>{E.getAttribute("src")===w?(k(),E.setAttribute("src","./public/assets/image/source_white.svg")):(k(),E.setAttribute("src",w))}));const A=document.querySelector(".time"),f=document.querySelector(".bar");setInterval((()=>{var e,t=b.instrumentTrack.getCurrentTime();A.innerText=t.toFixed(2),f.innerText="16"==(e=(t.toFixed(1)/.6).toFixed(0))?"4.4":["1.1","1.2","1.3","1.4","2.1","2.2","2.3","2.4","3.1","3.2","3.3","3.4","4.1","4.2","4.3","4.4"][e]}),100);const _=document.querySelector(".play");_.addEventListener("click",(()=>{t(_,b,y,v,h)})),document.querySelector(".stop").addEventListener("click",(()=>{r(_,b,y,v,h)})),document.querySelector(".rewind").addEventListener("click",(()=>{n(_,b,y,v,h)})),document.querySelector(".forward").addEventListener("click",(()=>{s(_,b,y,v,h)}));const L=document.querySelectorAll(".style"),S=document.querySelector(".info__title");L.forEach((e=>{e.addEventListener("click",(()=>{if(e.innerText!==S.innerText){r(_,b,y,v,h),b.removeTrack(),y.removeTrack(),v.removeTrack(),h.removeTrack(),S.innerText=e.innerText;var t=S.innerText.toLowerCase();b=g(t,"drums"),y=g(t,"bass"),v=g(t,"guitar"),h=g(t,"keyboard"),k(),E.setAttribute("src",w)}}))})),document.querySelectorAll("#mute").forEach((e=>{e.addEventListener("click",(()=>{switch(e.className){case"mute-drums":c(e,b);break;case"mute-bass":c(e,y);break;case"mute-guitar":c(e,v);break;case"mute-keyboard":c(e,h)}}))})),document.querySelectorAll("#headset").forEach((e=>{e.addEventListener("click",(()=>{var t=[b,y,v,h];switch(e.className){case"headset-drums":a(e,t,b);break;case"headset-bass":a(e,t,y);break;case"headset-guitar":a(e,t,v);break;case"headset-keyboard":a(e,t,h)}}))}));const q=document.querySelector(".volume-slider-drums");q.addEventListener("change",(()=>{i(q,b)}));const B=document.querySelector(".volume-slider-bass");B.addEventListener("change",(()=>{i(B,y)}));const I=document.querySelector(".volume-slider-guitar");I.addEventListener("change",(()=>{i(I,v)}));const x=document.querySelector(".volume-slider-keyboard");x.addEventListener("change",(()=>{i(x,h)})),document.addEventListener("keydown",(({keyCode:e})=>{32==e&&t(_,b,y,v,h),27==e&&r(_,b,y,v,h),39==e&&s(_,b,y,v,h),37==e&&n(_,b,y,v,h)}))})();